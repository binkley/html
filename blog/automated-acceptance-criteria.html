<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=utf-8>
    <title>Automated Acceptance Criteria</title>
    <link href='https://fonts.googleapis.com/css?family=Noto%20Sans' rel='stylesheet' type='text/css'>
    <style>
        body {
            font-family: 'Apple Color Emoji', 'Noto Sans', sans-serif;
        }

        .todo {
            color: red;
            font-style: oblique;
            text-decoration: line-through;
        }

        .todo:before {
            content: 'TODO: '
        }

        .story-syntax {
            font-weight: bolder;
        }

        .emoji {
            font-size: larger;
        }

        .message {
            font-style: oblique;
        }

        .trouble {
            color: red !important;
        }

        .missing {
            color: gray;
        }

        .untested {
        }

        .running {
            color: blue;
            font-style: oblique;
        }

        .passed {
            color: green;
        }

        .failed {
            color: red;
        }

        .errored {
            color: orange;
        }

        .disabled {
            color: gray;
        }

        .flex-container {
            display: flex;
            flex-flow: row wrap;
            justify-content: flex-start;
        }

        .header {
            flex: 100%;
        }

        .flex-item {
            margin: 1em;
        }
    </style>
</head>
<body>
<header>
    <p class="todo">This post mashes together lots of different concerns.
        Untangle them: stay focused on AACs.</p>
    <h1>Automated Acceptance Criteria</h1>
</header>
<nav>
    <ul>
        <li><a href="#scenario">A scenario</a></li>
        <li><a href="#forward-path">A forward path</a></li>
        <li><a href="#three-amigos">Enter the Three Amigos</a></li>
        <li><a href="#acceptance-criteria">What are Acceptance
            Criteria?</a></li>
        <li><a href="#story-picture">A picture of a story</a></li>
        <li><a href="#problems">Potential problems</a></li>
        <li><a href="#implementation">Possible implementations</a></li>
    </ul>
</nav>
<article>
    <section id="scenario">
        <h2>A scenario</h2>
        <p>Post-development testing on this team is a fairly ordinary role.
            The developers say a new web page is ready. Testers then
            validate the same page features each time for each new page,
            simple things:</p>
        <ul>
            <li>Can an account with security role <samp>X</samp> log in?</li>
            <li>Can <samp>X</samp> submit the form? (Or not submit if
                forbidden?)
            </li>
            <li>What page form defaults appear for role <samp>X</samp>? Do
                they reflect role <samp>X</samp>?
            </li>
        </ul>
        <p>(Yes, I know &mdash; what about developer testing? Bear with
            me.)</p>
        <p class="todo">Less fragile link for image?</p>
        <p class="todo">Scalable version of image?</p>
        <!--
        <img src="https://upload.wikimedia.org/wikipedia/en/1/14/Ralph_Wiggum.png"
             alt="Ralph Wiggum picking nose"
             style="float:right; width:10%; height: auto"/>
             -->
        <img src="https://lh3.googleusercontent.com/-o6e5YUtj8rU/TWkVMlQbqGI/AAAAAAAAACo/OmiXddT-biE/s200/RalphWiggum4.gif"
             alt="Ralph Wiggum thinking" style="float:right; width:15%;
             height: auto"/>
        <p>On it goes, the same work each time. Redundant, repetitive,
            error-prone, fiddly. And worst of all&mdash;<em>boring</em>,
            <strong>BORING</strong>! This is traditional, manual "user
            testing" at its worst.</p>
        <p><em>What's to be done?</em> <em>Can we fix this?</em></p>
        <p>After all, the testing is valuable: nobody wants broken web pages;
            everybody wants to log in. But is this the <em>most</em> valuable
            testing a human could do? Surely people are more clever, more
            insightful than this. And what about all the other page
            features not tested because of time spent on the basics?</p>
        <p>Well, people are more clever than this.</p>
    </section>
    <section id="forward-path">
        <h2>A forward path</h2>
        <p class="todo">Better section title</p>
        <p>What guides testing? If you're using nearly any form of modern user
            story writing, this includes something like "Acceptance Criteria".
            These are the gates that permit story development to be called
            successful: the testers are gatekeepers <a
                    href="https://www.thoughtworks.com/insights/blog/how-we-eliminated-gatekeeper-quality">in
                the manual testing world</a>. In the manual world these
            criteria might be congregated into a single "Requirements
            Document" or similar (think: <a
                    href="https://en.wikipedia.org/wiki/Big_Design_Up_Front">big,
                upfront design</a>).</p>
        <p>We can do better! Gatekeeper-style testing assumes a linear path
            from requirements to implementation to testing, just as waterfall
            considers these activities as distinct phases. But we know
            agile approaches do better than waterfall in most (nearly all)
            cases. Why should we build our teams to mirror waterfall? Of
            course the answer is to structure teams to look agile, even as
            the team itself practices agile values.</p>
    </section>
    <section id="three-amigos">
        <h2>Enter the Three Amigos</h2>
    </section>
    <section id="acceptance-criteria">
        <h2>What are Acceptance Criteria?</h2>
        <p>But where does this simple testing come from? Any software delivery
            process beyond "winging it" has some requirements</p>
        <p>Well-written agile stories have Acceptance Criteria. What are
            these? An Acceptance Criteria (AC) is a statement in a story that
            a tester (QA) can use to validate that all or a portion of the
            story is complete. The formulaic phrasing for ACs I like best
            is:</p>
        <blockquote>
            <span class="story-syntax">GIVEN</span> <em>some state of the
            world</em><br>
            <span class="story-syntax">WHEN</span> <em>some change
            happens</em><br>
            <span class="story-syntax">THEN</span> <em>some observable
            outcome results</em>
        </blockquote>
        <p>Generally for web applications this means when I do something with
            a web page in the application, then the page changes in some
            particular way or submits a request and the response page has
            some particular quality or property (or the negative case that
            is does not have that quality or property).</p>
        <p>In some cases it is even simpler: just check that a particular web
            address fully loads, for example, when testing login access to
            pages.</p>
        <img
                src="https://s3.amazonaws.com/insights-images-prod/Ideal20Test20Automation20Pyramid_2fb8a2f3e134e49a9ab79b0ef8afae05.jpg"
                alt="Ideal test automation pyramid"
                style="float:right; width:35%; height:auto;">
        <h2>So what's the question?</h2>
        <p>Wherever possible we want to automate. If something can be done for
            us by a computing machine, we don't want to spend human time on
            it. Humans can move on to more interesting, valuable work when
            existing tasks can be automated.</p>
        <p>Consider the Test Pyramid (<em>image right</em>): automating
            lower-value tests focuses people on higher-value ones. You get
            more human attention and insight on the kinds of tests which best
            improve the value of software. You win more.</p>
    </section>
    <section id="story-picture">
        <p class="todo">Too prologue before the main event.</p>
        <h2>A picture of a story</h2>
        <blockquote>
            <section>
                <h3>Narrative</h3>
                <p><span class="story-syntax">AS A</span> AAC author<br>
                    <span class="story-syntax">I WANT</span> a mock executable
                    story<br>
                    <span class="story-syntax">SO THAT</span> others can see
                    the value</p>
            </section>
            <section>
                <h3>Details</h3>
                <p>No actual criteria were validated in the execution of
                    these tests. This is only a mock.</p>
            </section>
            <section class="flex-container">
                <h3 class="header">
                    <button>Test All</button>
                    Acceptance criteria
                </h3>
                <div class="header"><strong>Summary:</strong>
                    <span class="missing">1 missing</span>,
                    <span class="untested">1 untested</span>,
                    <span class="running">1 running</span>,
                    <span class="passed">1 passed</span>,
                    <span class="failed">1 failed</span>,
                    <span class="errored">1 errored</span>,
                    <span class="disabled">1 disabled</span></div>
                <div class="flex-item">
                    <div>
                        <button><em>Create</em></button>
                        <span class="emoji">&#x1F637;</span>
                        <span class="missing">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Missingland<br>
                            <span class="story-syntax">THEN</span> there's no test
                        </span>
                    </div>
                    <div class="missing message trouble">No test (yet) - <em>create one!</em></div>
                </div>
                <div class="flex-item">
                    <div>
                        <button>Test</button>
                        <span class="emoji">&#x1F636;</span>
                        <span class="untested">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Newland<br>
                            <span class="story-syntax">THEN</span> nothing has happened yet
                        </span>
                    </div>
                    <div class="untested message trouble">Test never run - <em>be the first!</em></div>
                </div>
                <div class="flex-item">
                    <div>
                        <button>Cancel</button>
                        <span class="emoji">&#x1F60E;</span>
                        <span class="running">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Fastland<br>
                            <span class="story-syntax">THEN</span> tests run quickly
                        </span>
                    </div>
                    <div class="running message">15% done (3s)</div>
                </div>
                <div class="flex-item">
                    <div>
                        <button>Test</button>
                        <span class="emoji">&#x1F600;</span>
                        <span class="passed">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Happyland<br>
                            <span class="story-syntax">THEN</span> Unicorns
                        </span>
                    </div>
                </div>
                <div class="flex-item">
                    <div>
                        <button>Test</button>
                        <span class="emoji">&#x1F61E;</span>
                        <span class="failed">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Sadland<br>
                            <span class="story-syntax">THEN</span> there be Dragons
                        </span>
                    </div>
                    <div class="message failed trouble">Expected:
                        <em>Dragons</em>, got: <em>Puppies</em></div>
                </div>
                <div class="flex-item">
                    <div>
                        <button>Test</button>
                        <span class="emoji">&#x1F632;</span>
                        <span class="errored">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Crazyland<br>
                            <span class="story-syntax">THEN</span> nothing works right
                        </span>
                    </div>
                    <div class="message errored trouble">Test timed out
                        after 90 seconds
                    </div>
                </div>
                <div class="flex-item">
                    <div>
                        <button disabled>Disabled</button>
                        <span class="emoji">&#x1F634;</span>
                        <span class="disabled">
                            <span class="story-syntax">GIVEN</span> magical thinking<br>
                            <span class="story-syntax">WHEN</span> in Slowland<br>
                            <span class="story-syntax">THEN</span> tests are disabled
                        </span>
                    </div>
                    <div class="message disabled trouble">@dev1 @qa2:
                        BLOCKED on widget spanner
                    </div>
                </div>
            </section>
        </blockquote>
    </section>
    <section id="problems">
        <h2>Potential problems</h2>
        <p>Nothing is free. Potential problems with AACs include:</p>
        <ul>
            <li>
                <stron>Scaling:</stron>
            </li>
        </ul>
    </section>
    <section id="implementation">
        <h2>Possible implementations</h2>
        <ul class="todo">
            <li>REST between test system &amp; card wall</li>
            <li>Convention over configuration: test named by
                camel-catenating words in AC
            </li>
            <li>Convention over configuration: test page named by
                camel-catenting story title
            </li>
            <li>Create is an interesting case &mdash; how feasible is it
                to interact with the testing system &amp; use some kind
                of template to generate a new test case?
            </li>
            <li>Live bidi: Test button kicks off test via REST; test
                updates story via REST
            </li>
            <li>REST "batch": use HTTP 202 (Accepted) to kick off a test,
                poll for status update, redirect to final status. Test
                system would not call back into story system. (But how to
                update story if tests were run separately?) See <a
                        href="http://farazdagi.com/blog/2014/rest-long-running-jobs/"><cite>REST
                    and long-running jobs</cite></a>
            </li>
            <li>In a FitNesse context, can we do 1 test table/AC (hence 1
                page per story), or would it be 1 AC/page and a story is a
                suite?
            </li>
        </ul>
        <h2>UI considerations</h2>
        <ul class="todo">
            <li>Emojis should be driven by CSS, so teams can use or not
                use them as they prefer
            </li>
        </ul>
    </section>
</article>
</body>
